{% extends 'base.html' %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/submit_ticket.css' %}">
{% block content %}
<div class="hearder">
  <h3>Submit a ticket</h3>
</div>
<div id="dashboard-url" data-url="{% url 'dashboard' %}"></div>
<form method="POST" class="needs-validation" novalidate id="submit-ticket-form" url="{% url 'create_ticket' %}">
  {% csrf_token %}
  {{ form.non_field_errors }}

  <div class="mb-3">
    {{ form.centre.errors }}
    <select name="centre" id="id_centre" class="form-control" required>
      {% if form.centre.field.initial %}
      <option value="{{ form.centre.field.initial }}">{{ form.centre.field.initial }}</option>
      {% endif %}
      {% for centre in form.centre.field.queryset %}
      <option value="{{ centre.id }}">{{ centre.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    {{ form.category.errors }}
    <select name="category" id="id_category" class="form-control" required>
      <option value="" selected disabled>What type of issue is it?</option>
      {% for category in form.category.field.queryset %}
      <option value="{{ category.id }}">{{ category.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    {{ form.subcategory.errors }}
    <select name="subcategory" id="id_subcategory" class="form-control" required disabled>
      <option value="" selected disabled>Subcategory</option>
    </select>
  </div>

  <div class="mb-3">
    {{ form.title.errors }}
    <input type="text" name="title" id="id_title" class="form-control" placeholder="Ticket Title" required>
  </div>

  <div class="mb-3">
    {{ form.description.errors }}
    <textarea name="description" id="id_description" class="form-control" placeholder="Briefly describe the issue"
      required></textarea>
  </div>

  <button class="btn btn-primary" id="submit-btn" disabled>Submit</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/submit_ticket.js' %}"></script>
{% endblock %}
